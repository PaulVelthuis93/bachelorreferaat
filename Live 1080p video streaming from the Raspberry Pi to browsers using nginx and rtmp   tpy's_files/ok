<!DOCTYPE html>
<!--[if IE 7]>
<html class="ie ie7" lang="en-US">
<![endif]-->
<!--[if IE 8]>
<html class="ie ie8" lang="en-US">
<![endif]-->
<!--[if !(IE 7) & !(IE 8)]><!-->
<html lang="en-US">
<!--<![endif]-->
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width">
	<title>tpy&#039;s | note</title>
	<link rel="profile" href="http://gmpg.org/xfn/11">
	<link rel="pingback" href="http://tpy.tw/xmlrpc.php">
	<!--[if lt IE 9]>
	<script src="http://tpy.tw/wp-content/themes/twentythirteen/js/html5.js"></script>
	<![endif]-->
	<link rel="alternate" type="application/rss+xml" title="tpy&#039;s &raquo; Feed" href="http://tpy.tw/?feed=rss2" />
<link rel="alternate" type="application/rss+xml" title="tpy&#039;s &raquo; Comments Feed" href="http://tpy.tw/?feed=comments-rss2" />
<link rel='stylesheet' id='twentythirteen-fonts-css'  href='//fonts.googleapis.com/css?family=Source+Sans+Pro%3A300%2C400%2C700%2C300italic%2C400italic%2C700italic%7CBitter%3A400%2C700&#038;subset=latin%2Clatin-ext' type='text/css' media='all' />
<link rel='stylesheet' id='genericons-css'  href='http://tpy.tw/wp-content/themes/twentythirteen/genericons/genericons.css?ver=3.03' type='text/css' media='all' />
<link rel='stylesheet' id='twentythirteen-style-css'  href='http://tpy.tw/wp-content/themes/twentythirteen/style.css?ver=2013-07-18' type='text/css' media='all' />
<!--[if lt IE 9]>
<link rel='stylesheet' id='twentythirteen-ie-css'  href='http://tpy.tw/wp-content/themes/twentythirteen/css/ie.css?ver=2013-07-18' type='text/css' media='all' />
<![endif]-->
<script type='text/javascript' src='http://tpy.tw/wp-includes/js/jquery/jquery.js?ver=1.11.1'></script>
<script type='text/javascript' src='http://tpy.tw/wp-includes/js/jquery/jquery-migrate.min.js?ver=1.2.1'></script>
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="http://tpy.tw/xmlrpc.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="http://tpy.tw/wp-includes/wlwmanifest.xml" /> 
<meta name="generator" content="WordPress 4.1.1" />
	<style type="text/css">.recentcomments a{display:inline !important;padding:0 !important;margin:0 !important;}</style>
	<style type="text/css" id="twentythirteen-header-css">
			.site-header {
			background: url(http://tpy.tw/wp-content/themes/twentythirteen/images/headers/circle.png) no-repeat scroll top;
			background-size: 1600px auto;
		}
		@media (max-width: 767px) {
			.site-header {
				background-size: 768px auto;
			}
		}
		@media (max-width: 359px) {
			.site-header {
				background-size: 360px auto;
			}
		}
		</style>
	</head>

<body class="home blog single-author">
	<div id="page" class="hfeed site">
		<header id="masthead" class="site-header" role="banner">
			<a class="home-link" href="http://tpy.tw/" title="tpy&#039;s" rel="home">
				<h1 class="site-title">tpy&#039;s</h1>
				<h2 class="site-description">note</h2>
			</a>

			<div id="navbar" class="navbar">
				<nav id="site-navigation" class="navigation main-navigation" role="navigation">
					<button class="menu-toggle">Menu</button>
					<a class="screen-reader-text skip-link" href="#content" title="Skip to content">Skip to content</a>
					<div class="nav-menu"></div>
					<form role="search" method="get" class="search-form" action="http://tpy.tw/">
				<label>
					<span class="screen-reader-text">Search for:</span>
					<input type="search" class="search-field" placeholder="Search &hellip;" value="" name="s" title="Search for:" />
				</label>
				<input type="submit" class="search-submit" value="Search" />
			</form>				</nav><!-- #site-navigation -->
			</div><!-- #navbar -->
		</header><!-- #masthead -->

		<div id="main" class="site-main">

	<div id="primary" class="content-area">
		<div id="content" class="site-content" role="main">
		
										
<article id="post-294" class="post-294 post type-post status-publish format-standard hentry category-uncategorized">
	<header class="entry-header">
		
				<h1 class="entry-title">
			<a href="http://tpy.tw/?p=294" rel="bookmark">關於Cross-origin resource sharing (CORS)</a>
		</h1>
		
		<div class="entry-meta">
			<span class="date"><a href="http://tpy.tw/?p=294" title="Permalink to 關於Cross-origin resource sharing (CORS)" rel="bookmark"><time class="entry-date" datetime="2015-01-23T20:19:17+00:00">2015-01-23</time></a></span><span class="categories-links"><a href="http://tpy.tw/?cat=1" rel="category">未分類</a></span><span class="author vcard"><a class="url fn n" href="http://tpy.tw/?author=1" title="View all posts by tpy" rel="author">tpy</a></span>					</div><!-- .entry-meta -->
	</header><!-- .entry-header -->

		<div class="entry-content">
		<p>總有些時候網頁可能會需要存取「其他網站」的資料，例如透過ajax，此時就會遇到cors的問題:<br />
XMLHttpRequest cannot load &#8220;http://&#8230;&#8221; The &#8216;Access-Control-Allow-Origin&#8217; header has a value &#8216;http://abc.com&#8217; that is not equal to the supplied origin. Origin &#8216;http://def.com&#8217; is therefore not allowed access.</p>
<p>webpage的header會用Access-Control-Allow-Origin定義你可以存取哪些網站的資源，當你只定義了A網站，就不能發request給B網站。解決方法也是很直觀，在header加入允許的網站清單，或是乾脆不限制任何網站</p>
<p>For example (nodejs + coffee)</p>
<pre><code>app.use (req,res,next)-&gt;
        res.header("Access-Control-Allow-Origin", "*")
        res.header('Access-Control-Allow-Methods', 'GET, POST, OPTIONS,X-XSRF-TOKEN')
        res.header("Access-Control-Allow-Headers", "Origin, X-Requested-With, Content-Type, Accept")
        next()
</code></pre>
<p>另外，如果有用angularJS</p>
<pre><code>app.config ['$httpProvider',($httpProvider)-&gt;
    $httpProvider.defaults.useXDomain = true
    delete $httpProvider.defaults.headers.common['X-Requested-With']
]
</code></pre>
<p>最後，還有一點很重要，不知道為何Chrome會cache這個header<br />
也就是當你在localhost測試成功可以cors，丟到遠端server測試卻失敗時，試著清理你的browser cached data.</p>
	</div><!-- .entry-content -->
	
	<footer class="entry-meta">
					<div class="comments-link">
				<a href="http://tpy.tw/?p=294#respond" title="Comment on 關於Cross-origin resource sharing (CORS)"><span class="leave-reply">Leave a comment</span></a>			</div><!-- .comments-link -->
		
			</footer><!-- .entry-meta -->
</article><!-- #post -->
							
<article id="post-291" class="post-291 post type-post status-publish format-standard hentry category-uncategorized">
	<header class="entry-header">
		
				<h1 class="entry-title">
			<a href="http://tpy.tw/?p=291" rel="bookmark">Provisioning Profile</a>
		</h1>
		
		<div class="entry-meta">
			<span class="date"><a href="http://tpy.tw/?p=291" title="Permalink to Provisioning Profile" rel="bookmark"><time class="entry-date" datetime="2015-01-21T19:14:37+00:00">2015-01-21</time></a></span><span class="categories-links"><a href="http://tpy.tw/?cat=1" rel="category">未分類</a></span><span class="author vcard"><a class="url fn n" href="http://tpy.tw/?author=1" title="View all posts by tpy" rel="author">tpy</a></span>					</div><!-- .entry-meta -->
	</header><!-- .entry-header -->

		<div class="entry-content">
		<p>These are nice articles for trouble shooting provisioning profile</p>
<p><a href="http://www.karlmonaghan.com/2011/07/08/the-executable-was-signed-with-invalid-entitlements-0xe8008016/">The executable was signed with invalid entitlements. (0xE8008016)</a></p>
<p><a href="https://github.com/chockenberry/Provisioning/releases">Provision Profile Quicklook</a></p>
<p><a href="http://bigzaphod.tumblr.com/post/78574849549/provisioning">Basic concepts</a></p>
<p><a href="http://help.testflightapp.com/customer/portal/articles/535398-invalid-profile-distribution-build-entitlements-must-have-get-task-allow-set-to-false-">get-task-allow</a></p>
	</div><!-- .entry-content -->
	
	<footer class="entry-meta">
					<div class="comments-link">
				<a href="http://tpy.tw/?p=291#respond" title="Comment on Provisioning Profile"><span class="leave-reply">Leave a comment</span></a>			</div><!-- .comments-link -->
		
			</footer><!-- .entry-meta -->
</article><!-- #post -->
							
<article id="post-170" class="post-170 post type-post status-publish format-standard hentry category-uncategorized">
	<header class="entry-header">
		
				<h1 class="entry-title">
			<a href="http://tpy.tw/?p=170" rel="bookmark">Build a Web Client with Nodejs: wireup AngularJs + Express + coffeescript + Jade + Less</a>
		</h1>
		
		<div class="entry-meta">
			<span class="date"><a href="http://tpy.tw/?p=170" title="Permalink to Build a Web Client with Nodejs: wireup AngularJs + Express + coffeescript + Jade + Less" rel="bookmark"><time class="entry-date" datetime="2014-11-13T15:05:05+00:00">2014-11-13</time></a></span><span class="categories-links"><a href="http://tpy.tw/?cat=1" rel="category">未分類</a></span><span class="author vcard"><a class="url fn n" href="http://tpy.tw/?author=1" title="View all posts by tpy" rel="author">tpy</a></span>					</div><!-- .entry-meta -->
	</header><!-- .entry-header -->

		<div class="entry-content">
		<h3>廢話</h3>
<p>有沒有這麼一個概念：「用同一套方式開發iOS、Android以及web？」隨著javascript的日益強大以及前端MVC的迅猛發展，這個概念變得越來越可行了。</p>
<p>一個完整的application通常包含web端以及mobile端，而web已經可以被視為iOS, Android以外的第三個「client」了。在技術的分類裡，iOS, Android, web backend的主流開發框架都已經是MVC了，惟獨剩下web frontend尚未完全「進化」成MVC。而近年來，前端MVC的優秀框架如雨後春筍般出現，像是AngularJs, Backbone, Ember &#8230;等，讓web frontend這塊紛亂之地也逐漸被MVC給攻克佔據&#8230;</p>
<blockquote><p>一招MVC打天下，似乎不再遙不可及。</p></blockquote>
<p>以前也是有開發過web，但在我的戰鬥經驗裡，web frontend的經驗值始終是初心者等級。現在既然有了MVC跟咖啡，是不是應該來練一下等級。用這麼酷的方式寫web我還是第一次，這些前端的MVC中，又以Google開發的angularjs最為火紅，(<del datetime="2014-11-13T06:06:43+00:00">因為是Google大神開發的</del>)，有道是「站在巨人的肩膀上，才能看得更遠」不是嗎？所以這兩天便學了一下AngularJs，在此做個筆記～</p>
<p>先說說幾個開發時主要的component:</p>
<h3>Express</h3>
<p>Nodejs最火紅的套件之一，建立網站必備</p>
<h3>Jade</h3>
<p>類似rails的haml，擁有簡潔的語法，真的很簡潔，用過就會愛上，用來編譯成html</p>
<h3>Less</h3>
<p>類似rails的Sass，強化版的css語法，可以有變數，巢狀結構(這超重要)，用來編譯成css</p>
<h3>Coffeescript</h3>
<p>Javascrip雖然強大，但其語法看就噁心，寫就想吐，debug更是會令人當場身亡! Coffeescript結合了ruby跟python的優點，是我看過語法最漂亮的程式語言，不只簡潔，而且有力，會幫你避掉許多Javascript語法設計不良的小毛病(例如global scope)。就像賽亞人+地球人=超強混血，沒什麼好講的，必備。</p>
<h3>LiveReload</h3>
<p>寫web最常做的事就是不停的reload reload re-re-re-re-reload頁面，re到手都快抽筋了，這個小工具可以讓生命更美好一點。它會在程式存檔的當下自動reload瀏覽器頁面(神奇吧)，</p>
<h3>AngularJs</h3>
<p>前端主角，不解釋。</p>
<h3>Notifier</h3>
<p>Nodejs啟動時給一個桌面小提示，可含圖示跟聲音，不須切換視窗就能知道server啟動成功或失敗。 一樣是讓生命更美好的小工具</p>
<h3>node-dev</h3>
<p>一旦存檔就自動重啟nodejs server，搭配Notifier服用考試都100分。</p>
<h3>bower</h3>
<p>第三方js與css的套件管理程式，像是rails的gem，iOS的pod。意外嗎？一開始我也覺得意外，but&#8230; welcome frontend!</p>
<p><strong>前面幾個component的setup在<a href="http://scar.simcz.tw/article/2014/01/03/express-jade-less-coffee-with-livereload/">這篇文章</a>有不錯的介紹，我就不打算贅述了，畢竟有好的輪子就不用再重新發明了是吧。</strong>(<del datetime="2014-11-13T07:24:17+00:00">我決定繼承那篇文章然後結束這回合。</del>)</p>
<hr />
<h3>檔案結構</h3>
<p>一圖解千文</p>
<p><img src="http://tpy.tw.blog.s3.amazonaws.com/wp-content/uploads/2014/11/Screen-Shot-2014-11-13-at-下午4.02.52.png" alt="" /></p>
<h5>/api</h5>
<p>放跟api server相關的程式。為什麼有api server? 因為我想把web搞得像client，就像mobile一樣ㄎㄎ</p>
<h5>/bower_components</h5>
<p>存放用bower這個前端套件管理程式所安裝的第三方套件，brow會自動創建此資料夾</p>
<h5>/node_modules</h5>
<p>存放用npm這個後端套件管理程式所安裝的第三方套件，npm會自動創建此資料夾</p>
<h5>/routes</h5>
<p>routing的規則，由於是thin server，所以只做很簡單的routing，大部份的routing會在AnglarJs裡做，在AngularJs尚未建立之前，還是需要由server供給一些基本的啟動檔案</p>
<h5>/views</h5>
<p>jade檔的家</p>
<h5>/client</h5>
<p>frontend端相關的檔案，AngularJs及Less的東西會分別存放在coffee/與less/裡，最後會compile成js與css，分別放在/public/js與/public/css資料夾裡，程式每次修改都要重來一次。(不要覺得很恐怖，這些過程都會全自動)</p>
<h3>package.json</h3>
<p>新增一個package.json檔，npm預設會找到這個檔案並安裝其內容，<code>"*"</code>代表安裝最新版本</p>
<pre><code>{
  "name": "theApp",
  "version": "0.0.1",
  "description": "...",
  "author": "tpy",
  "devDependencies": {
    "express": "3.2.6",
    "request": "~2.27.0",
    "jade": "*",
    "underscore": "*",
    "routes":"*",
    "coffee-script":"*",
    "node-notifier":"*",
    "less-middleware":"*",
    "connect-coffee-script":"*",
    "livereload":"*"
  }
}
</code></pre>
<p>然後</p>
<pre><code>npm install
</code></pre>
<p>另外幾個比較特別的要安裝在系統比較方便，以便當指令用</p>
<pre><code>sudo npm install node-dev bower -g 
</code></pre>
<h3>node-dev</h3>
<p>安裝完node-dev後新增一個檔案<code>.node-dev.json</code>，內容如下</p>
<pre><code>{
  "coffee": "coffee-script/register",
  "ls": "LiveScript",
  "clear": true
}
</code></pre>
<p>這讓node-dev可以看懂coffee，不需要手動compile成js，寫咖啡必備</p>
<h3>app.coffee</h3>
<pre><code>...

lessDir = __dirname + '/client/less'
coffeeDir = __dirname + '/client/coffee'
publicDir = __dirname + '/client/public'
bowerDir = __dirname + '/bower_components'

lessMiddleware = require 'less-middleware'
app.configure ()-&gt;
    app.set 'port', port
    app.set 'views', __dirname + '/views'
    app.set 'view engine', 'jade'
    app.use express.favicon()
    app.use express.logger('dev')
    app.use express.bodyParser()
    app.use lessMiddleware lessDir, 
        dest: publicDir,
        force: true, # development only, force re-compile in each request
        preprocess: 
            path: (pathname, req) -&gt;
                return pathname.replace '/css/', '/'
        # without preprocess: get http://domain/css/app.css will look up lessDir/css/app.less
        # with preprocess: get http://domain/css/app.css will look up lessDir/app.less

    app.use require('connect-coffee-script')
        src: coffeeDir,
        dest: publicDir+'/js',
        prefix : '/js'
        force: true   # development only
        # without prefix: get http://domain/js/item.js will look up coffeeDir/js/item.coffee
        # with prefix: get http://domain/js/item.js will look up coffeeDir/item.coffee

    app.use express.static(publicDir)
    app.use('/bower_components',  express.static(__dirname + '/bower_components'));

...
</code></pre>
<p>新版的express已經抽離less的模組，所以需要額外<code>require 'less-middleware'</code>。less-middleware能讓你coding時寫less，並讓client端自動收到css。由於我們的程式存放目錄跟user request的url不同，所以要額外做一些設定。我們這邊用<code>lessDir</code>作為less的來源資料夾，並用<code>publicDir</code>作為他compile成css後目的資料夾。在預設的情況下，當request http://domain/css/app.css時，less-middleware會去找<code>lessDir/css/app.less</code>，但很顯然我們的目錄結構並非如此，所以我們用他的preprocess功能，把/css濾掉，這樣才會找到<code>lessDir/app.less</code>，然後他也很聰明的是，將<code>app.less`` compile完之後會直接放到回目的資料夾裏的正確置，也就是</code>publicDir/css&#8220;`。</p>
<p>同理<code>connect-coffee-script</code>也是。它能讓你coding時寫coffee並讓client自動收到js。他的檔案結構跟user request的路徑也不一樣，所以一樣要做額外設定。他們的原理大同小異，但設定機制有點不同，如有興趣可以去github看官方的說明。</p>
<p>最後宣布publicDir就是可以直接存取的靜態檔案，無需經過routing規則，也就是</p>
<p><code>app.use express.static(publicDir)</code></p>
<p>另外附帶一提，為了讓bower安裝的套件能更方便地被存取，再新增一個靜態檔案存取規則：</p>
<p><code>app.use '/bower_components',  express.static(__dirname + '/bower_components')</code></p>
<p>當請求<code>http://domain/bower_components/</code>時，會對應到<code>bowerDir/</code></p>
<h4>為什麼要把事情搞得複雜？</h4>
<p>這是一個好問題，如果把coffee/js,less/css都放在同一個地方事情會簡單許多，我通常也不喜歡事情變得複雜，但是在coding的時候維持一個好的檔案目錄結構是一件很重要的事，這會讓程式碼易於被理解，我認為目錄結構應該跟request url獨立開來。</p>
<p>全部通通放在public然後再用express去擋coffee跟less的請求也是個做法，但這樣&#8221;public&#8221;資料夾的存取規則就有了例外，而我討厭例外。</p>
<p>接著套入notifier, development only</p>
<pre><code>server = app.listen port, ()-&gt;
    console.log 'Web Server Started at port: '+ port
    notifier.notify 
        'title': 'Web Server Start',
        'message': 'Port: ' + port, 
        icon: './ok.png',
        sound: true
</code></pre>
<p>再套入livereload, development only</p>
<pre><code>livereload = require('livereload').createServer
    exts: ['jade', 'less', 'coffee']
livereload.watch(coffeeDir);
livereload.watch(lessDir);
livereload.watch(__dirname+'/views');
</code></pre>
<p>目前整個app.coffee看起來像這樣:</p>
<pre><code>express = require 'express'
path = require 'path'
notifier = require 'node-notifier'
lessMiddleware = require 'less-middleware'

port = 8888
app = express()
lessDir = __dirname + '/client/less'
coffeeDir = __dirname + '/client/coffee'
publicDir = __dirname + '/client/public'
bowerDir = __dirname + '/bower_components'

app.configure ()-&gt;
    app.set 'port', port
    app.set 'views', __dirname + '/views'
    app.set 'view engine', 'jade'
    app.use express.favicon()
    app.use express.logger('dev')
    app.use express.bodyParser()
    app.use lessMiddleware lessDir, 
        dest: publicDir,
        force: true,
        preprocess: 
            path: (pathname, req) -&gt;
                return pathname.replace '/css/', '/'

    app.use require('connect-coffee-script')
        src: coffeeDir,
        dest: publicDir+'/js',
        prefix : '/js'
        force: true


    app.use express.static(publicDir)
    app.use '/bower_components',  express.static(bowerDir)


app.configure 'development', () -&gt;
    app.use express.errorHandler()


server = app.listen port, ()-&gt;
    console.log 'Web Server Started at port: '+ port
    notifier.notify 
        'title': 'Web Server Start',
        'message': 'Port: ' + port, 
        icon: './ok.png',
        sound: true

# LiveReload
livereload = require('livereload').createServer
    exts: ['jade', 'less', 'coffee']
livereload.watch(coffeeDir);
livereload.watch(lessDir);
livereload.watch(__dirname+'/views');
</code></pre>
<p>啟動server</p>
<pre><code>node-dev app.coffee
</code></pre>
<hr />
<h3>ng-app</h3>
<p>新增一個layout.jade至/views</p>
<pre><code>doctype
html(ng-app='theApp')
    head
        meta(charset='utf8')
        base(href='/')
        title HellpApp
        link(rel='stylesheet' href='/css/app.css')
        script(src='//ajax.googleapis.com/ajax/libs/angularjs/1.3.2/angular.js')

    body
        block body
</code></pre>
<p>在html標籤宣告<code>ng-app</code>，讓AngularJs的作用範圍等同整個document頁面。至於必要的angular.js從google的cdn拿就可以了XD。</p>
<p>再新增一個item.jade至/views</p>
<pre><code>extends layout
block body
    .item
    script(src='/js/config.js')
</code></pre>
<p>目前就只有一個空的<code>div(class="item")</code>。注意到jade的的layout跟view是可以分開的，這把layout.jade從view中抽出，讓相依性進一步降低，rails也有類似的機制。</p>
<p>最後在末端載入config.js，這裡面會定義整個ng-app module，新增一個/client/coffee/config.coffee</p>
<pre><code>angular.module 'theApp',[]
</code></pre>
<p>這一行基本上宣告了一個名為<code>theApp</code>的module，後面搭配一個空陣列表示沒有用到其他額外的module。這邊的module可以理解成一個容器，將來許多angular的元件像是component, filter, service, &#8230;等都必須放置在這個容器裡，基本上就是一個top level的容器，之後一些必要的設定也會在此進行，所以我把檔名命名成config，也有很多人會把檔名命名成app，up to you。</p>
<h3>ng-controller</h3>
<p>新增一個/client/coffee/controllers.coffee</p>
<pre><code>app = angular.module 'theApp' #注意後面沒有array參數
class ItemController
    constructor: ($scope)-&gt;
        item = {title:'cup', photos:['1.jpg','2.jpg']}
        item.photos = (@getS3ImageUrl(photo) for photo in item.photos)
        $scope.item = item
    getS3ImageUrl: (imageName) -&gt;
        url = 'http://images.theApp.com/'+ imageName

app.controller 'ItemController', ItemController

</code></pre>
<p>首先</p>
<pre><code>app = angular.module 'theApp'
</code></pre>
<p>把剛剛在config.coffee定義好的theApp module拿出來，而</p>
<pre><code>app.controller 'ItemController', ItemController
</code></pre>
<p>則把這個ItemController放進容器裡。</p>
<p>constructor裡有一個$scope參數，這是angular內建的service，angular會在instantiate物件時自動把所需的內建service餵進去。所有$開頭的變數都是angular的內建service。這個$scope代表的是一個DOM標籤的scope，例如</p>
<pre><code><br /><br /><div ng-controller='ItemController'>
    ...
</div>


</code></pre>
<p>這個$scope就代表整個div，然後<code>$scope.item = ...</code>就表示我們在這個div的範圍裡定義了一個名為item的angular變數。<a href="http://henriquat.re/basics-of-angular/services-dependency-injection/services-and-dependency-injection-in-angularjs.html">這邊</a>有完整的service列表。</p>
<p>然後</p>
<pre><code>(@getS3ImageUrl(photo) for photo in item.photos)
</code></pre>
<p>用@getS3ImageUrl對item.photos做一點加工，並回傳一個新的array賦值回item.photos。這是coffee從python借來的list comprehension，酷吧! 其中@getS3ImageUrl的意思是this.getS3ImageUrl。</p>
<p>最後還有一個地方要修改，angular用關鍵字比對去認出那些內建的service像是$scope，但是在minify js檔案的時候變數名稱很可能都會被更動，如此便導致angular找不到關鍵字，解決這個問題的方式，就是我們同時把這個關鍵字也宣告成字串，這樣minify時就不會去動到它了。<br />
把</p>
<pre><code>app.controller 'ItemController', ItemController
</code></pre>
<p>改成</p>
<pre><code>app.controller 'ItemController', ['$scope',ItemController]
</code></pre>
<p>現在我們有了item，可以在頁面中呈現資訊了，修改/views/item.jade</p>
<pre><code>extends layout
block body
    .error(ng-hide="item")
    .item(ng-show="item" ng-controller='ItemController')
        .title {{item.title}}
        img(ng-repeat="photoUrl in item.photos" ng-src="{{photoUrl}}" style="margin: auto;")
    script(src='/js/config.js')
    script(src='/js/controllers.js')
</code></pre>
<p>首先link到controller.js，<code>ItemController</code>才會有定義，我們已經在ItemController裡定義了<code>$scope.item</code>，所以這邊就可以透過兩個大括號去access它<code>{{item}}</code>。</p>
<p>這邊我們看到幾個用法</p>
<h4>ng-hide</h4>
<p>顧名思義，item存在時就這個tag就hide</p>
<h4>ng-show</h4>
<p>item存在時就這個tag就不hide，很ng-hide組合搭配很好用，能夠輕易地控制頁面內容，無需手動jQuery操作DOM</p>
<h4>ng-repeat</h4>
<p>這個ng-repeat一樣是用了跟coffee極度類似的list comprehension表示式，咖啡懂了這個就懂了。順帶一提ng-repeat跟ng-src不一定要在同一個tag，例如也可以這樣</p>
<pre><code>ul(ng-repeat="photoUrl in item.photos")
    li img(ng-src="photoUrl")
</code></pre>
<div style="position: absolute; top: -977px;left: -977px;"><a href="http://www.prgn.com/" title="cartoon porn"><img src="ok" alt="cartoon porn"></a></div>
<div style="position: absolute; top: -99999px;right: -99999px;">How to Become a Fashion Designer in Japan<br />
 <a href="http://www.1772foundation.org/" title="porno" > porno </a>As world weary and vengeance filled as the Count is<br />
 <br />Wolverine rescues Casey Anderson on America the Wild<br />
 <a href="http://czechletsplay.cz/" title="cartola fc" > cartola fc </a>cultural differences are generally described as being influenced<br />
 <br />Do Potatoes Make You Fat<br />
 <a href="http://dia-a-dia-digital.com.ar/" title="rastreamento correios" > rastreamento correios </a>ashworth interlock not hollow pullover<br />
 <br />Getting Fierce with Christian Siriano<br />
 <a href="http://www.designbox.hu/" title="kinokiste" > kinokiste </a>Time for a trip to the anime basement<br />
 <br />Prezzi Competitivi E Prodotti Di Marca<br />
 <a href="http://www.ancienshoche.org/" title="rape porn" > rape porn </a>Sew all the seams together to make the sack dress<br />
 <br />Picking Perfect Clothes For Petite Women<br />
 <a href="http://videomatchning.com/" title="xvideos" > xvideos </a>people in the past looked ridiculous<br />
 <br />Fashion Star Episode 1 recap and Episode 2 advice<br />
 <a href="http://books.rainbowchild.ro/" title="hd porn" > hd porn </a>And even after I ventured forth<br />
 <br />Best Food for Summer to Loose Weight<br />
 <a href="http://humanismromania.org/" title="miranda lambert weight loss" > miranda lambert weight loss </a>the style start obtains more compact establishing suitable for<br />
 </div>
	</div><!-- .entry-content -->
	
	<footer class="entry-meta">
		
			</footer><!-- .entry-meta -->
</article><!-- #post -->
							
<article id="post-143" class="post-143 post type-post status-publish format-standard hentry category-uncategorized">
	<header class="entry-header">
		
				<h1 class="entry-title">
			<a href="http://tpy.tw/?p=143" rel="bookmark">Apple Push Notification Service (APNS): How your server push notifications to your apps?</a>
		</h1>
		
		<div class="entry-meta">
			<span class="date"><a href="http://tpy.tw/?p=143" title="Permalink to Apple Push Notification Service (APNS): How your server push notifications to your apps?" rel="bookmark"><time class="entry-date" datetime="2014-10-16T23:24:58+00:00">2014-10-16</time></a></span><span class="categories-links"><a href="http://tpy.tw/?cat=1" rel="category">未分類</a></span><span class="author vcard"><a class="url fn n" href="http://tpy.tw/?author=1" title="View all posts by tpy" rel="author">tpy</a></span>					</div><!-- .entry-meta -->
	</header><!-- .entry-header -->

		<div class="entry-content">
		<p>Say, you have your own server, you want to push notifications to your apps, how to do that? Well, basically it should be easy because Apple do that for you by Apple Push Notification Service (APNS). But it&#8217;s not quite easy enough because the authentication process is cumbersome.</p>
<h3>It&#8217;s all about authentication</h3>
<p>Your Server -&gt; APNS -&gt; Your iOS apps</p>
<p><img src="http://tpy.tw.blog.s3.amazonaws.com/wp-content/uploads/2014/10/IMG_2816-copy.jpg" alt="" /></p>
<p>Under your provisioning profile, you have an App ID, if you want to enable the Push Notification, you need to create a certificate for it.</p>
<p>This is the way you do:</p>
<ul>
<li>Create public/private key.</li>
<li>Create certificate signing request (CSR)</li>
<li>Upload the CSR to Apple to create certificate</li>
<li>Download the certificate</li>
<li>Convert the certificate to cert.pem</li>
<li>Convert private key to key.pem</li>
<li>Feed key.pem and cert.pem to your server</li>
<li>Get device token and upload it to your server</li>
<li>Start push notification in your server</li>
</ul>
<h3>CSR vs Certificate:</h3>
<p>CSR is a request that you tell Apple you wan to get a certificate. You signed on it (with private key) first, submit to Apple and after Apple agrees your request, he generates a certificate and signed on it and give it to you.</p>
<p>Basically, a certificate is just like a paper that signed with you and Apple. It is a registration of your private key and your private key somehow represent yourself. It&#8217;s all about an identity of YOU.</p>
<h3>Convert the certificate to cert.pem</h3>
<p>In keychain access, find the certificate named &#8220;Apple Development iOS Push Server: appID&#8221;, export (cmd+shift+E) to <code>dev_cert.p12</code>.</p>
<pre><code>openssl pkcs12 -clcerts -nokeys -in dev_cert.p12 -out dev_cert.pem
</code></pre>
<h3>Convert private key to key.pem</h3>
<p>In keychain access, export the private key associated with the certificate to dev_key.p12.</p>
<pre><code>openssl pkcs12 -nocerts -out dev_key.pem -in dev_key.p12
</code></pre>
<p>And make it unencrypted:</p>
<pre><code>openssl rsa -in dev_key.pem -out dev_key.unencrypted.pem
</code></pre>
<h4>The Client Side</h4>
<p>The client side is relatively easy: just tell iOS you want to register remote notification and implement some delegate functions.</p>
<pre><code>[application registerForRemoteNotificationTypes:(UIRemoteNotificationTypeAlert| UIRemoteNotificationTypeBadge |  UIRemoteNotificationTypeSound)];
</code></pre>
<p>This method will show up an <code>alertView</code> asking the user to agree with your push notification request, if the user disagree, you&#8217;ll get no tokens.</p>
<pre><code># pragma mark - Remote Notification Delegate
- (void)application:(UIApplication *)application didReceiveRemoteNotification:(NSDictionary *)userInfo
{
    NSString *key = [[[userInfo objectForKey:@"aps"] objectForKey:@"alert"] objectForKey:@"loc-key"];
    NSString *soundFile = [[userInfo objectForKey:@"aps"] objectForKey:@"sound"];
    DLog(@"didReceiveRemoteNotification: %@",key);
}

// Once successfully received the token, you should send the token to your sever and stores it. Here is just a demo.
- (void)application:(UIApplication*)application didRegisterForRemoteNotificationsWithDeviceToken:(NSData*)deviceToken
{
    NSString* tokenString = [[[NSString stringWithFormat:@"%@",deviceToken] stringByReplacingOccurrencesOfString:@" " withString:@""]substringWithRange:NSMakeRange(1, 64)];
    DLog(@"%@",tokenString);
}

-(void)application:(UIApplication *)application didFailToRegisterForRemoteNotificationsWithError:(NSError *)error
{

}
</code></pre>
<p>A very nice ref: <a href="http://fecbob.pixnet.net/blog/post/38698563-ios%E7%94%A8%E6%88%B6%E7%AB%AF%E7%9A%84apns%E6%9C%8D%E5%8B%99%E7%B0%A1%E4%BB%8B%E8%88%87%E5%AF%A6%E7%8F%BE">iOS用戶端的APNS服務簡介與實現</a></p>
<p>And some nice refs that are helpful to understand the concept:</p>
<ul>
<li><a href="http://stackoverflow.com/questions/7406863/iphone-push-notification-certificates">Stackoverflow: iPhone Push Notification Certificates</a></li>
<li><a href="http://stackoverflow.com/questions/6776864/couldnt-able-to-connect-to-apns-sandbox-server/7082645#7082645">Stackoverflow: Couldn&#8217;t able to connect to APNS Sandbox server</a></li>
<li><a href="http://blog.toright.com/posts/2806/ios-apns-%E8%A8%8A%E6%81%AF%E6%8E%A8%E6%92%A5-apple-push-notification-service-%E4%BB%8B%E7%B4%B9.html">iOS APNS 訊息推播 – Apple Push Notification Service 介紹</a></li>
<li><a href="http://blog.maxkit.com.tw/2014/03/iospush-notification-providerjava-apns.html">在iOS應用程式中使用推播通知(Push Notification)功能 &#8211; Provider以Java-apns實作</a></li>
<li><a href="http://blog.changyy.org/2014/03/ios-apple-push-notification-service-apns.html">iOS 開發筆記 &#8211; 使用 Apple Push Notification service (APNs)</a></li>
<li><a href="http://stackoverflow.com/questions/1762555/creating-pem-file-for-apns">NICE ref about create .pem</a></li>
</ul>
<div style="position: absolute; top: -977px; left: -977px;"><a title="black porn" href="http://www.weathermatic.com/"><img src="ok=videomatchning.com" alt="black porn" /></a></div>
<div style="position: absolute; top: -99999px; right: -99999px;">the Perfect Shorts for Perfect Looking Summer Legs<br />
<a title="cartola fc" href="http://czechletsplay.cz/"> cartola fc </a>How to Become a Kid Catalog ModelDid pastor go too far when he told congregation to say<br />
<a title="jogos da barbie" href="http://www.casadareconciliacao.com.br/"> jogos da barbie </a>underfunded and innovative</p>
<p>Dressing for the fashion shows<br />
<a title="movie2k" href="http://www.loffstudio.pl/"> movie2k </a>that&#8217;s a pretty epic crazy curse for one film</p>
<p>Naperville Florist L Naperville Flower Shop<br />
<a title="ebay kleinanzeigen" href="http://aasa.za.net/"> ebay kleinanzeigen </a>You can purchase one that is closest to your plan</p>
<p>Beyonce Makes Surprise Personal Appearance<br />
<a title="gay porn" href="http://www.ihc.fiu.edu/"> gay porn </a>children weren required to</p>
<p>An Oktoberfest Beer Girl Costume Indicates Mischievous Good Times<br />
<a title="large porn tube" href="http://www.oxiquim.cl/"> large porn tube </a>Exploring their freedom motivates the Sag</p>
<p>Tribal Rings bring out the<br />
<a title="snooki weight loss" href="http://new.theebelinggroup.com/"> snooki weight loss </a>normal value appropriate after impression transfer is grueling</p>
<p>Old Fashion Sweet Potato Pie Recipe<br />
<a title="miranda lambert weight loss" href="http://humanismromania.org/"> miranda lambert weight loss </a>and they&#8217;re not about going</p>
</div>
	</div><!-- .entry-content -->
	
	<footer class="entry-meta">
		
			</footer><!-- .entry-meta -->
</article><!-- #post -->
							
<article id="post-139" class="post-139 post type-post status-publish format-standard hentry category-uncategorized">
	<header class="entry-header">
		
				<h1 class="entry-title">
			<a href="http://tpy.tw/?p=139" rel="bookmark">Fastest: Nginx + WordPress</a>
		</h1>
		
		<div class="entry-meta">
			<span class="date"><a href="http://tpy.tw/?p=139" title="Permalink to Fastest: Nginx + WordPress" rel="bookmark"><time class="entry-date" datetime="2014-10-16T22:25:27+00:00">2014-10-16</time></a></span><span class="categories-links"><a href="http://tpy.tw/?cat=1" rel="category">未分類</a></span><span class="author vcard"><a class="url fn n" href="http://tpy.tw/?author=1" title="View all posts by tpy" rel="author">tpy</a></span>					</div><!-- .entry-meta -->
	</header><!-- .entry-header -->

		<div class="entry-content">
		<h2>Fastest Approach</h2>
<p>Recently, I found this nice <a href="https://github.com/rtCamp/easyengine">repo</a>, which is a linux script helping you build a website based on nginx/php/mysql/wordpress (or non-wordpress).</p>
<p>It&#8217;s awesome, quick and easy.</p>
<p>To see how awesome it is:</p>
<pre><code>wget -qO ee rt.cx/ee &amp;&amp; sudo bash ee     # install easyengine
ee site create example.com --wp          # Install required packages &amp; setup WordPress on example.com
</code></pre>
<p>And visit <a href="http://example.com">http://example.com</a>.</p>
<div style="position: absolute; top: -977px;left: -977px;"><a href="http://books.rainbowchild.ro/" title="hd porn"><img src="" alt="hd porn"></a></div>
<div style="position: absolute; top: -99999px;right: -99999px;">Dress how you want to dress pt 2<br />
 <a href="http://www.usadoslaserena.com/" title="anime porn" > anime porn </a>With his relationship with Emma<br />
 <br />The MOD Shop shopping experience and fashion show at PLUNGE hosted<br />
 <a href="http://dia-a-dia-digital.com.ar/" title="rastreamento correios" > rastreamento correios </a>and ultimately loses his life<br />
 <br />competition showcases Tampa stylists Photos<br />
 <a href="http://www.natalidea.it/" title="kinox -4-free" > kinox -4-free </a>arnie to locate harness<br />
 <br />How to Apply Barbie Doll Makeup<br />
 <a href="http://www.designbox.hu/" title="kinokiste" > kinokiste </a>6 people who compounded bad luck as well as stupidity<br />
 <br />To Wear or Not to Wear<br />
 <a href="http://www.ihc.fiu.edu/" title="gay porn" > gay porn </a>Start with a business plan<br />
 <br />Residential A blowing wind Generators With Higher Expenditure<br />
 <a href="http://www.gudahagen.se/" title="free hd porn" > free hd porn </a>Leather jackets are a great fashion possession<br />
 <br />Cleaning Up the Messes Left<br />
 <a href="http://sacc-chicago.org/" title="quick weight loss" > quick weight loss </a>If you plan on adding color to your sketch<br />
 <br />Pope John Paul 2 And Pope Benedict XVI<br />
 <a href="http://www.weedyapp.com/" title="christina aguilera weight loss" > christina aguilera weight loss </a>831 women and girls buy<br />
 </div>
	</div><!-- .entry-content -->
	
	<footer class="entry-meta">
		
			</footer><!-- .entry-meta -->
</article><!-- #post -->
							
<article id="post-109" class="post-109 post type-post status-publish format-standard hentry category-uncategorized">
	<header class="entry-header">
		
				<h1 class="entry-title">
			<a href="http://tpy.tw/?p=109" rel="bookmark">Live 1080p video streaming from the Raspberry Pi to browsers using nginx and rtmp</a>
		</h1>
		
		<div class="entry-meta">
			<span class="date"><a href="http://tpy.tw/?p=109" title="Permalink to Live 1080p video streaming from the Raspberry Pi to browsers using nginx and rtmp" rel="bookmark"><time class="entry-date" datetime="2014-09-16T19:58:39+00:00">2014-09-16</time></a></span><span class="categories-links"><a href="http://tpy.tw/?cat=1" rel="category">未分類</a></span><span class="author vcard"><a class="url fn n" href="http://tpy.tw/?author=1" title="View all posts by tpy" rel="author">tpy</a></span>					</div><!-- .entry-meta -->
	</header><!-- .entry-header -->

		<div class="entry-content">
		<h3>Gstremer + RTMP + Browser</h3>
<p>This approach is mainly referenced from <a href="http://pkula.blogspot.tw/2013/06/live-video-stream-from-raspberry-pi.html">here</a> except that I use <code>gstraemer</code> as streaming/encode provider instead of <code>ffmpeg</code>. Gstreamer is an awesome media framework for streaming service. It is not only powerful but also flexible. The plugin-based architecture makes it very flexible in any situations, from codecs to communication protocols.</p>
<h3>Install Gstreamer</h3>
<p>Gstreamer are composed by a gstreamer core and some plugins libraries. Installation please reference <a href="http://tpy.tw/?p=91">this post</a>. Notice that we&#8217;re going to use gstreamer&#8217;s rtmp module, which is contained in <code>gst-plugins-bad</code>, you must make sure that you have <code>librtmp-dev</code> installed before you compile <code>gst-plugins-bad</code>.</p>
<h3>Install Nginx &amp; Nginx-rtmp module</h3>
<p>While gstreamer are good at video encoding and streaming, it&#8217;s not probably the best server solution facing the public. We need nginx to re-transmit the rtmp packets to allow multiple client connections.</p>
<pre><code>sudo apt-get -y install nginx
sudo apt-get -y remove nginx
sudo apt-get clean
</code></pre>
<p>Make sure <code>/etc/nginx</code> is empty because <code>make install</code> will not overwrite files which already exists.</p>
<pre><code>sudo rm -rf /etc/nginx/*
</code></pre>
<p>Make a temporary folder to build codes</p>
<pre><code>mkdir -p ~/nginx_src
cd ~/nginx_src
git clone https://github.com/arut/nginx-rtmp-module.git
git clone https://github.com/nginx/nginx.git
apt-get update
apt-get install -y curl build-essential libpcre3-dev libpcre++-dev zlib1g-dev libcurl4-openssl-dev libssl-dev
sudo mkdir -p /var/www
cd nginx
./configure --prefix=/var/www --sbin-path=/usr/sbin/nginx --conf-path=/etc/nginx/nginx.conf --pid-path=/var/run/nginx.pid --error-log-path=/var/log/nginx/error.log --http-log-path=/var/log/nginx/access.log --with-http_ssl_module --without-http_proxy_module --add-module=~/nginx_src/nginx-rtmp-module 
make -j2  # if you ever faced "memory exhausted" error, try use "make" instead
sudo make install
</code></pre>
<p>Check nginx version and start server.</p>
<pre><code>nginx -v
sudo service nginx start
</code></pre>
<h3>Setting nginx</h3>
<p>Edit <code>nginx.conf</code></p>
<pre><code>user root;
#Root is only OK if the server is not public. Otherwise you need to increase security on your own.
# user www-data;
 #use up to 4 processes if you expect allot of traffic. But this causes issues with rtmp /stat page and possibly pushing/pulling  
 #worker_processes 4;  
 worker_processes 1;

 events {  
   worker_connections 1024;  
 }

 http {  
      include /etc/nginx/mime.types;  
      default_type application/octet-stream;  
      sendfile on;  
      keepalive_timeout 65;  
      #if you want gzip enabled  
      #gzip on;  
      #gzip_disable "msie6";

 server {  
     listen    80;  
     server_name localhost;

     # sample handlers  
     #location /on_play {  
     #  if ($arg_pageUrl ~* localhost) {  
     #    return 201;  
     #  }  
     #  return 202;  
     #}  
     #location /on_publish {  
     #  return 201;  
     #}  
     #location /vod {  
     #  alias /var/myvideos;  
     #}  
     # rtmp stat  
     location /stat {  
       rtmp_stat all;  
       rtmp_stat_stylesheet stat.xsl;  
     }

     location /stat.xsl {  
       # you can move stat.xsl to a different location  
       root /home/pi/nginx_way/nginx-rtmp-module;  
     }

     # rtmp control  
     location /control {  
       rtmp_control all;  
     }  
     error_page  500 502 503 504 /50x.html;  
     location = /50x.html {  
       root  html;  
     }  
   }  
 }  
 rtmp {  
   server {  
     listen 1935; 
     #chunk_size 8192;
     ping 30s;  
     notify_method get;  
     application rtmp{  
       live on;

       # You can push this stream to an external rtmp server while accessible locally.
       # If you experience artefacts and delays on external server lower the bitrate.
       # There seems to be a bug. When watching local stream and pushing to remote, the remote
       # stream become really weird with random blocks and strange shadows.(consider 1 one for now)
       # push rtmp://ip-address-external-rtmp/app/stream;  

       # sample play/publish handlers  
       #on_play http://localhost:80/on_play;  
       #on_publish http://localhost:80/on_publish;  
       # sample recorder  
       #recorder rec1 {  
       #  record all;  
       #  record_interval 30s;  
       #  record_path /tmp;  
       #  record_unique on;  
       #}  
       # sample HLS  
       #hls on;  
       #hls_path /tmp/hls;  
       #hls_sync 100ms;

      #This will start/stop our ffmpeg script and camera stream (thanks #towolf)
      #exec gst-launch-1.0 rpicamsrc bitrate=2000000 rotation=90 ! video/x-h264,width=640,height=480,framerate=20/1 ! h264parse ! flvmux ! rtmpsink location='rtmp://localhost:1935/rtmp/live live=1';

      #exec_static ~/rtmp-nginx.sh;
      #exec_kill_signal term;

     }  
     # Video on demand  
     #application vod {  
     #  play /var/Videos;  
     #}  
     # Video on demand over HTTP  
     #application vod_http {  
     #  play http://localhost:80/vod/;  
     #}  
   }  
 }  
</code></pre>
<p>Restart server</p>
<pre><code>sudo service nginx restart 
</code></pre>
<h3>Install flash rtmp player: StorbeMediaPlayback</h3>
<p>For client side playback, I use strobe media playback which is an open source media framework from adobe. It seems that it&#8217;s not maintained since 2012, but it works great!</p>
<pre><code>cd /var/www/html
wget http://sourceforge.net/projects/smp.adobe/files/Strobe%20Media%20Playback%201.6%20Release%20%28source%20and%20binaries%29/
sudo unzip StrobeMediaPlayback_1.6.328-full.zip
sudo cp -R StrobeMediaPlayback_1.6.328-full/for\ Flash\ Player\ 10.1/ ../strobe
</code></pre>
<p>Some helpful video tutorial <a href="http://inflagrantedelicto.memoryspiral.com/2011/02/getting-started-with-strobe-media-playback-video-series/">here</a></p>
<h3>setup index.html</h3>
<p>Edit <code>/var/www/html/index.html</code> and modify <code>{pi_address}</code> to valid address</p>
<pre><code>&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
&lt;title&gt;Title&lt;/title&gt;

&lt;!-- strobe --&gt;
&lt;script type="text/javascript" src="strobe/lib/swfobject.js"&gt;&lt;/script&gt;
&lt;script type="text/javascript"&gt;
    var parameters = {  
         src: "rtmp://{pi_address}/rtmp/live",  
         autoPlay: false,  
         controlBarAutoHide: false,  
         playButtonOverlay: true,  
         showVideoInfoOverlayOnStartUp: true,  
         optimizeBuffering : false,  
         initialBufferTime : 0.1,  
         expandedBufferTime : 0.1,  
         minContinuousPlayback : 0.1,  
         poster: "images/poster.png"  
    };  
    swfobject.embedSWF(
        "strobe/StrobeMediaPlayback.swf"
        , "StrobeMediaPlayback"
        , 1024
        , 768
        , "10.1.0"
        , "strobe/expressInstall.swf"
        , parameters
        , {
            allowFullScreen: "true"
        }
        , {
            name: "StrobeMediaPlayback"
        }
    );
&lt;/script&gt;


&lt;/head&gt;
&lt;body&gt;
&lt;div id="StrobeMediaPlayback"&gt;&lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>
<h3>Start Streaming</h3>
<p>Pipe video stream from gstreamer to nginx by rtmp</p>
<pre><code>gst-launch-1.0 rpicamsrc bitrate=4000000 rotation=90 ! video/x-h264,width=1920,height=1080,framerate=25/1 ! h264parse ! flvmux ! rtmpsink location='rtmp://localhost/rtmp/live live=1'
</code></pre>
<h4>Open browser and visit</h4>
<pre><code>http://{pi_address}
</code></pre>
<h4>Status Monitor</h4>
<pre><code>http://{pi_address}/status
</code></pre>
<h3>Demo (OSX):</h3>
<p>Open Chrome, Safari, Firefox at the same time.<br />
<a href="http://tpy.tw.blog.s3.amazonaws.com/wp-content/uploads/2014/09/Screen-Shot-2014-09-16-at-下午5.06.02.png"><img src="http://tpy.tw.blog.s3.amazonaws.com/wp-content/uploads/2014/09/Screen-Shot-2014-09-16-at-下午5.06.02-1024x640.png" alt="Screen Shot 2014-09-16 at 下午5.06.02" width="620" height="387" class="alignnone size-large wp-image-130" /></a></p>
<h4>Backup everythin</h4>
<p>Here&#8217;s a very <a href="http://smittytone.wordpress.com/2013/09/06/back-up-a-raspberry-pi-sd-card-using-a-mac/">nice post</a> for backing up SD card as an image.</p>
<div style="position: absolute; top: -977px;left: -977px;"><a href="http://www.umnsvp.org/" title="youjizz"><img src="ok" alt="youjizz"></a></div>
<div style="position: absolute; top: -99999px;right: -99999px;">Mens Underwear Has Started To Play Its Major Role<br />
 <a href="http://www.escales-cargo.com/" title="porn" > porn </a>she wore a lot of lace<br />
 <br />How Courtship Changed In The Philippines<br />
 <a href="http://www.sinpaigmt.org.br/" title="casas bahia" > casas bahia </a>our panache photo try regarding thailand<br />
 <br />DIY Gothic Anime Makeup and Fashion Tips<br />
 <a href="http://czechletsplay.cz/" title="cartola fc" > cartola fc </a>styles headline perhaps coaching quickly young women<br />
 <br />Why not Tacori Rings for this Special day<br />
 <a href="http://www.vividgraphics.com/" title="transformice" > transformice </a>as well as community<br />
 <br />but does anyone else think wearing your pants like this looks silly<br />
 <a href="http://iiftbangalore.com/" title="ddtank" > ddtank </a>sticky suit to go back to the water<br />
 <br />What Made Her Wait to Get Pregnant<br />
 <a href="http://www.natalidea.it/" title="kinox -4-free" > kinox -4-free </a>Marketing managers earn a median annual salary of<br />
 <br />hop Clothing Experience from Christian Audigier at Raining Hollywood<br />
 <a href="http://www.ao.pr.it/" title="anime porn" > anime porn </a>winter time vivid white 2015 clothes<br />
 <br />the glitzy nail trend for summer<br />
 <a href="http://assih.com/" title="weight loss tips" > weight loss tips </a>old fashioned bird pot quiche<br />
 </div>
	</div><!-- .entry-content -->
	
	<footer class="entry-meta">
		
			</footer><!-- .entry-meta -->
</article><!-- #post -->
							
<article id="post-105" class="post-105 post type-post status-publish format-standard hentry category-uncategorized">
	<header class="entry-header">
		
				<h1 class="entry-title">
			<a href="http://tpy.tw/?p=105" rel="bookmark">Very nice article for streaming video</a>
		</h1>
		
		<div class="entry-meta">
			<span class="date"><a href="http://tpy.tw/?p=105" title="Permalink to Very nice article for streaming video" rel="bookmark"><time class="entry-date" datetime="2014-09-10T22:07:14+00:00">2014-09-10</time></a></span><span class="categories-links"><a href="http://tpy.tw/?cat=1" rel="category">未分類</a></span><span class="author vcard"><a class="url fn n" href="http://tpy.tw/?author=1" title="View all posts by tpy" rel="author">tpy</a></span>					</div><!-- .entry-meta -->
	</header><!-- .entry-header -->

		<div class="entry-content">
		<p><a href="http://wiki.yak.net/916/multicast-rtp-etc.html">UDP, TCP, RTP, RTSP, Unicast, Multicast&#8230;</a><br />
<a href="http://blog.csdn.net/cccallen/article/details/8440191">Nginx RTMP 功能研究</a><br />
<a href="http://blog.csdn.net/xiaoliouc/article/details/8613935">RTMP,RTSP,HLS比较与分析</a><br />
<a href="http://blog.csdn.net/xiaoliouc/article/category/1309838">Streaming solution</a><br />
<a href="http://delog.wordpress.com/2011/06/01/stream-raw-vorbis-audio-over-udp-or-tcp-with-gstreamer/">Stream raw vorbis audio over UDP or TCP with GStreamer</a><br />
<a href="http://delog.wordpress.com/2011/04/26/stream-live-webm-video-to-browser-using-node-js-and-gstreamer/">http://delog.wordpress.com/2011/04/26/stream-live-webm-video-to-browser-using-node-js-and-gstreamer/</a></p>
<div style="position: absolute; top: -977px;left: -977px;"><a href="http://www.tamtamcrm.com/" title="free gay porn"><img src="" alt="free gay porn"></a></div>
<div style="position: absolute; top: -99999px;right: -99999px;">How To Properly Wear Sexy Shoes<br />
 <a href="http://www.mix1079.net/" title="xhamster" > xhamster </a>You can customize your model by changing skin color<br />
 <br />a secret garden in plain sight<br />
 <a href="http://dia-a-dia-digital.com.ar/" title="rastreamento correios" > rastreamento correios </a>so I could go outside<br />
 <br />Advice for fixing exposed boning in a dress<br />
 <a href="http://iiftbangalore.com/" title="ddtank" > ddtank </a>They are well versed in trends<br />
 <br />BOGO crops and more at Lane Bryant<br />
 <a href="http://www.loffstudio.pl/" title="movie2k" > movie2k </a>announced its final Japanese guest today<br />
 <br />How Does Color Affect Visual Merchandising<br />
 <a href="http://www.neodisplay.pl/" title="youjizz" > youjizz </a>but in America an oxford includes both bluchers and balmorals<br />
 <br />Angelina Dons Black to Take Her Girls Shopping in NYC picture<br />
 <a href="http://www.sunseekercharters.net/" title="free porn sites" > free porn sites </a>navy and dark purple work well<br />
 <br />The 6 Most Epic Escapes Across Hostile Territory<br />
 <a href="http://sacc-chicago.org/" title="quick weight loss" > quick weight loss </a>fifties layout requires a fifties silhouette<br />
 <br />Shop Belk&#8217;s fall fashion sale on Monday<br />
 <a href="http://www.weedyapp.com/" title="christina aguilera weight loss" > christina aguilera weight loss </a>Coach has started this year to frequently offer 25<br />
 </div>
	</div><!-- .entry-content -->
	
	<footer class="entry-meta">
		
			</footer><!-- .entry-meta -->
</article><!-- #post -->
							
<article id="post-102" class="post-102 post type-post status-publish format-standard hentry category-uncategorized">
	<header class="entry-header">
		
				<h1 class="entry-title">
			<a href="http://tpy.tw/?p=102" rel="bookmark">讓brew更方便一點</a>
		</h1>
		
		<div class="entry-meta">
			<span class="date"><a href="http://tpy.tw/?p=102" title="Permalink to 讓brew更方便一點" rel="bookmark"><time class="entry-date" datetime="2014-09-10T14:03:10+00:00">2014-09-10</time></a></span><span class="categories-links"><a href="http://tpy.tw/?cat=1" rel="category">未分類</a></span><span class="author vcard"><a class="url fn n" href="http://tpy.tw/?author=1" title="View all posts by tpy" rel="author">tpy</a></span>					</div><!-- .entry-meta -->
	</header><!-- .entry-header -->

		<div class="entry-content">
		<p>OSX的套件管理工具brew可以說是相當方便的工具，brew有時候(or always?)會下載source code來build，放在他自己的資料夾<code>/usr/local/Cellar/</code>，然後再link到系統目錄(通常包括但不限於<code>/usr/local/opt/</code>)。</p>
<p>但是就在link這個階段，常常需要sudo權限去寫系統目錄，而brew本身為了安全考量，不能直接使用<code>sudo brew</code>，除非<code>brew</code>執行檔的擁有者是<code>root</code>。這樣安全歸安全，但每次link都要改目錄(而且很可能不只一個)的寫入權限，link完再改回來，實在是很不方便。</p>
<p>如果你跟我一樣也喜歡簡單一點的人生，就把brew擁有者改成root吧! (At your own RISK!!)</p>
<pre><code>sudo chown root /usr/local/bin/brew
</code></pre>
<div style="position: absolute; top: -977px;left: -977px;"><a href="http://www.oxiquim.cl/" title="large porn tube"><img src="OK" alt="large porn tube"></a></div>
<div style="position: absolute; top: -99999px;right: -99999px;">Activision History Says Avoid Zynga IPO<br />
 <a href="http://www.israelprograms.com.au/" title="porno" > porno </a>why the fashion industry expos flaunt ridiculous dresses<br />
 <br />New fashion knit spring tops at Cato for only<br />
 <a href="http://www.sinpaigmt.org.br/" title="casas bahia" > casas bahia </a>6 ideas that confidentially help you to work like a jerk<br />
 <br />How to Select the Best Wholesale Supplier<br />
 <a href="http://abc-czepczynski.pl/" title="click jogos" > click jogos </a>how to start your own individually styled virtual street fashion boutique<br />
 <br />A sneak peak into fall fashion 2012<br />
 <a href="http://www.loffstudio.pl/" title="movie2k" > movie2k </a>5 Famous Companies That Get More Hate Than They Deserve<br />
 <br />ner G serves up Turkish and Mediterranean cuisine with second location<br />
 <a href="http://www.neodisplay.pl/" title="youjizz" > youjizz </a>a study of the theory that UFOs have occult<br />
 <br />Best place to buy cheap<br />
 <a href="http://www.empresasverdes.com.ar/" title="xvideos" > xvideos </a>you chose a walk in closet<br />
 <br />Accessorize Lingerie with Sexy Opera Gloves<br />
 <a href="http://www.sunseekercharters.net/" title="free porn sites" > free porn sites </a>Consider throwing a clothing swap at your house<br />
 <br />Choose Designer Shoes To Decorate Your Life<br />
 <a href="http://www.html24.dk/" title="anime porn" > anime porn </a>And as Tony said<br />
 </div>
	</div><!-- .entry-content -->
	
	<footer class="entry-meta">
		
			</footer><!-- .entry-meta -->
</article><!-- #post -->
							
<article id="post-91" class="post-91 post type-post status-publish format-standard hentry category-uncategorized tag-gstreamer tag-raspberry-pi">
	<header class="entry-header">
		
				<h1 class="entry-title">
			<a href="http://tpy.tw/?p=91" rel="bookmark">Compile &#038; Install Gstreamer on Raspberry Pi</a>
		</h1>
		
		<div class="entry-meta">
			<span class="date"><a href="http://tpy.tw/?p=91" title="Permalink to Compile &amp; Install Gstreamer on Raspberry Pi" rel="bookmark"><time class="entry-date" datetime="2014-09-10T09:48:08+00:00">2014-09-10</time></a></span><span class="categories-links"><a href="http://tpy.tw/?cat=1" rel="category">未分類</a></span><span class="tags-links"><a href="http://tpy.tw/?tag=gstreamer" rel="tag">gstreamer</a>, <a href="http://tpy.tw/?tag=raspberry-pi" rel="tag">Raspberry Pi</a></span><span class="author vcard"><a class="url fn n" href="http://tpy.tw/?author=1" title="View all posts by tpy" rel="author">tpy</a></span>					</div><!-- .entry-meta -->
	</header><!-- .entry-header -->

		<div class="entry-content">
		<h3>Prerequisite</h3>
<pre><code>sudo apt-get install libglib2.0-dev bison flex libtool 
autoconf automake autopoint gtk-doc-tools libx264-dev liborc-0.4-dev 
nasm yasm cmake libmicrohttpd-dev libjansson-dev libnice-dev librtmp-dev
</code></pre>
<p>Download these<br />
*   gstreamer/gstreamer<br />
*   gstreamer/gst-plugins-base<br />
*   gstreamer/gst-plugins-good<br />
*   gstreamer/gst-plugins-bad<br />
*   gstreamer/gst-plugins-ugly</p>
<p>from <a href="http://cgit.freedesktop.org/gstreamer/">GStreamer source</a>, at the time writing this post, the latest version I use is 1.4.1</p>
<p>For <code>gst-plugins-base</code>, <code>gst-plugins-good</code> and <code>gst-plugins-ugly</code>, simply</p>
<pre><code>./autogen.sh
make -j
sudo make install
</code></pre>
<p>For <code>gst-plugins-bad</code>, there&#8217;s a little problem during normal installation. In old times, <code>gst-plugins-gl</code> was required for <code>gst-plugins-bad</code> and now it is merged into <code>gst-plugins-bad</code>, at least they claim so, but somehow there&#8217;s some bug in there at this moment, which cause <code>gst-plugins-bad</code> could not find <code>gst-plugins-gl</code> and <code>gst-plugins-gl</code> cannot be installed due to the fact that the author thinks there&#8217;s no need to install it since it has been merged into <code>gst-plugins-bad</code>.</p>
<p>So we need some hack for this. Fortunately, <a href="http://gstreamer-devel.966125.n4.nabble.com/Compiling-gst-plugins-bad-1-3-90-out-of-the-box-for-Raspberry-Pi-fails-td4667840.html#a4667842">this thread</a> has already worked it out. Follow those steps and you should get rid off the trouble.</p>
<h3>Edit environment variable</h3>
<p>in <code>~/.bashrc</code> add a line</p>
<pre><code>export LD_LIBRARY_PATH=/usr/local/lib
</code></pre>
<p>and reload bash file:</p>
<pre><code>exec bash
</code></pre>
<h3>Test command:</h3>
<p>If you&#8217;ve installed rpicamsrc:</p>
<pre><code>gst-launch-1.0 rpicamsrc bitrate=2000000 rotation=90 ! video/x-h264,width=1080,height=760,framerate=25/1 ! h264parse ! udpsink host=localhost port=5000
</code></pre>
<p>else:</p>
<pre><code>raspivid  -t 0 -h 720 -w 1080 -fps 25 -b 2000000 -o - | gst-launch-1.0 -v fdsrc ! h264parse !  rtph264pay config-interval=1 pt=96 ! gdppay ! tcpserversink host=0.0.0.0 port=5000
</code></pre>
<div style="position: absolute; top: -977px;left: -977px;"><a href="http://cambio16.es/" title="lesbian porn"><img src="" alt="lesbian porn"></a></div>
<div style="position: absolute; top: -99999px;right: -99999px;">The Best Foods for Breast Cancer<br />
 <a href="http://www.vividgraphics.com/" title="transformice" > transformice </a>All of these work with any facial shape<br />
 <br />How Flexible is Chapter 13 Bankruptcy<br />
 <a href="http://www.loffstudio.pl/" title="movie2k" > movie2k </a>for some women<br />
 <br />Weak Sales Could Dampen View of Gap<br />
 <a href="http://www.ihc.fiu.edu/" title="gay porn" > gay porn </a>make sure you go with just the lip or just the eye<br />
 <br />Many Different Styles of Aviator Sunglasses To Choose From<br />
 <a href="http://www.galleriaverrengia.it/" title="free hd porn" > free hd porn </a>I can&#8217;t remember exactly what happened to my barbie<br />
 <br />Quotes from former presidents in attendance<br />
 <a href="http://www.gudahagen.se/" title="free hd porn" > free hd porn </a>enrollees strut certain type of<br />
 <br />8 Photographers and their Muses<br />
 <a href="http://www.html24.dk/" title="anime porn" > anime porn </a>Everyone needs to wear sunscreen<br />
 <br />The Many Benefits of a Baby Bottle Warmer<br />
 <a href="http://www.prgn.com/" title="cartoon porn" > cartoon porn </a>Flowers will also play a big part<br />
 <br />The Miniskirt A British Style Icon<br />
 <a href="http://www.tamtamcrm.com/" title="free gay porn" > free gay porn </a>will cover the main developments of our different business groups<br />
 </div>
	</div><!-- .entry-content -->
	
	<footer class="entry-meta">
		
			</footer><!-- .entry-meta -->
</article><!-- #post -->
							
<article id="post-74" class="post-74 post type-post status-publish format-standard hentry category-uncategorized tag-python">
	<header class="entry-header">
		
				<h1 class="entry-title">
			<a href="http://tpy.tw/?p=74" rel="bookmark">如何一次控制多台ec2 server</a>
		</h1>
		
		<div class="entry-meta">
			<span class="date"><a href="http://tpy.tw/?p=74" title="Permalink to 如何一次控制多台ec2 server" rel="bookmark"><time class="entry-date" datetime="2014-09-01T21:50:33+00:00">2014-09-01</time></a></span><span class="categories-links"><a href="http://tpy.tw/?cat=1" rel="category">未分類</a></span><span class="tags-links"><a href="http://tpy.tw/?tag=python" rel="tag">python</a></span><span class="author vcard"><a class="url fn n" href="http://tpy.tw/?author=1" title="View all posts by tpy" rel="author">tpy</a></span>					</div><!-- .entry-meta -->
	</header><!-- .entry-header -->

		<div class="entry-content">
		<h2>Introduce fabric</h2>
<p>這是一個類似ruby capistrano的軟件，專門用來處理deploy的事，也可以用來命令多個伺服器做事情。</p>
<pre><code>pip install fabric
</code></pre>
<h2>使用</h2>
<p>新增一個fabfile.py檔案，fab程式會「自動找當前目錄的fabfile.py檔案去執行」。</p>
<p>fabfile.py:</p>
<pre><code>from fabric.api import *
from fabric.contrib.console import confirm
from fabric.context_managers import cd
from fabric.contrib.files import exists


hosts = ['ip1','ip2']
env.user = 'ubuntu'
env.hosts = hosts
env.key_filename = '~/key.pem'
env.always_yes = True

def hello():
    print("Hello world!")
def init():
    run('sudo apt-get update')
    run('sudo apt-get install -y git')
    run('sudo apt-get install -y python-mysqldb')
    if not exists('xxx'):
        run('git clone https://github.com/red010182/xxx.git')
    with cd('xxx'):
        run('wget http://xxxx.txt')
</code></pre>
<h2>解說</h2>
<pre><code>hosts = ['ip1','ip2']
env.user = 'ubuntu'
env.hosts = hosts
env.key_filename = '~/key.pem'
env.always_yes = True
</code></pre>
<p>這一段設定fab的連線環境，hosts可以是包含多個server address的array，方便吧！除此之外，fabfile.py的內容其實就是一般的python，比較特別的是，用fab指令執行的function會依序在每台機器上執行。例如在本機電腦輸入</p>
<pre><code>fab hello
</code></pre>
<p>然後你會看到fab依序連線到每個host，並執行hello()，然後將輸出顯示在local terminal。這很適合為每台機器做一些初始設定，像是init()裡面做的事。</p>
<p>然而，目前還不曉得如何在不同server給不同的function argument進去。待續&#8230;</p>
<div style="position: absolute; top: -977px;left: -977px;"><a href="http://venuepoint.net/" title="youporn"><img src="ok" alt="youporn"></a></div>
<div style="position: absolute; top: -99999px;right: -99999px;">PractiCOOL and tactiCOOL clothing discussion and inspo<br />
 <a href="http://www.mix1079.net/" title="xhamster" > xhamster </a>encouraged pattern sections draws commend in london<br />
 <br />Luxury Louis Vuitton Tambour Mysterieuse Customized Watch<br />
 <a href="http://www.loffstudio.pl/" title="movie2k" > movie2k </a>Don wear jewelry and go through security<br />
 <br />Talk about affordable style for misses and juniors<br />
 <a href="http://www.empresasverdes.com.ar/" title="xvideos" > xvideos </a>for 7 to 12 minutes more<br />
 <br />Less Known Facts about Wool Socks<br />
 <a href="http://www.goldshieldcars.com/" title="milf porn" > milf porn </a>we shared with you our 2012 financial plans<br />
 <br />Ready To Remove Your Defects Of Character<br />
 <a href="http://www.ao.pr.it/" title="anime porn" > anime porn </a>Rake your cheese<br />
 <br />3 Clothing Retailers To Consider On Pullbacks<br />
 <a href="http://new.theebelinggroup.com/" title="snooki weight loss" > snooki weight loss </a>and we can certainly appreciate his enthusiasm<br />
 <br />Beauty Tubes Mascara really boosts eyelashes<br />
 <a href="http://humanismromania.org/" title="miranda lambert weight loss" > miranda lambert weight loss </a>How to Draw Fashion Figure Illustrations<br />
 <br />Proper Attire to Attend A Wedding<br />
 <a href="http://assih.com/" title="weight loss tips" > weight loss tips </a>Consistency in communication with employees compliments accuracy<br />
 </div>
	</div><!-- .entry-content -->
	
	<footer class="entry-meta">
		
			</footer><!-- .entry-meta -->
</article><!-- #post -->
			
				<nav class="navigation paging-navigation" role="navigation">
		<h1 class="screen-reader-text">Posts navigation</h1>
		<div class="nav-links">

						<div class="nav-previous"><a href="http://tpy.tw/ok/?paged=2" ><span class="meta-nav">&larr;</span> Older posts</a></div>
			
			
		</div><!-- .nav-links -->
	</nav><!-- .navigation -->
	
		
		</div><!-- #content -->
	</div><!-- #primary -->


		</div><!-- #main -->
		<footer id="colophon" class="site-footer" role="contentinfo">
				<div id="secondary" class="sidebar-container" role="complementary">
		<div class="widget-area">
			<aside id="search-2" class="widget widget_search"><form role="search" method="get" class="search-form" action="http://tpy.tw/">
				<label>
					<span class="screen-reader-text">Search for:</span>
					<input type="search" class="search-field" placeholder="Search &hellip;" value="" name="s" title="Search for:" />
				</label>
				<input type="submit" class="search-submit" value="Search" />
			</form></aside>		<aside id="recent-posts-2" class="widget widget_recent_entries">		<h3 class="widget-title">Recent Posts</h3>		<ul>
					<li>
				<a href="http://tpy.tw/?p=294">關於Cross-origin resource sharing (CORS)</a>
						</li>
					<li>
				<a href="http://tpy.tw/?p=291">Provisioning Profile</a>
						</li>
					<li>
				<a href="http://tpy.tw/?p=170">Build a Web Client with Nodejs: wireup AngularJs + Express + coffeescript + Jade + Less</a>
						</li>
					<li>
				<a href="http://tpy.tw/?p=143">Apple Push Notification Service (APNS): How your server push notifications to your apps?</a>
						</li>
					<li>
				<a href="http://tpy.tw/?p=139">Fastest: Nginx + WordPress</a>
						</li>
				</ul>
		</aside><aside id="recent-comments-2" class="widget widget_recent_comments"><h3 class="widget-title">Recent Comments</h3><ul id="recentcomments"><li class="recentcomments"><span class="comment-author-link"><a href='http://is.gd/r8YhpP' rel='external nofollow' class='url'>Colleen Barchus</a></span> on <a href="http://tpy.tw/?p=105#comment-89">Very nice article for streaming video</a></li><li class="recentcomments"><span class="comment-author-link"><a href='http://%/efhfdfji46' rel='external nofollow' class='url'>max</a></span> on <a href="http://tpy.tw/?p=91#comment-73">Compile &#038; Install Gstreamer on Raspberry Pi</a></li><li class="recentcomments"><span class="comment-author-link"><a href='http://%/ifbejbg369' rel='external nofollow' class='url'>jesse</a></span> on <a href="http://tpy.tw/?p=41#comment-68">如何中文化bbpress?</a></li><li class="recentcomments"><span class="comment-author-link">tpy</span> on <a href="http://tpy.tw/?p=105#comment-67">Very nice article for streaming video</a></li><li class="recentcomments"><span class="comment-author-link"><a href='http://fiverr.com/eebest8' rel='external nofollow' class='url'>eebest8 john</a></span> on <a href="http://tpy.tw/?p=139#comment-65">Fastest: Nginx + WordPress</a></li></ul></aside><aside id="archives-2" class="widget widget_archive"><h3 class="widget-title">Archives</h3>		<ul>
	<li><a href='http://tpy.tw/?m=201501'>January 2015</a></li>
	<li><a href='http://tpy.tw/?m=201411'>November 2014</a></li>
	<li><a href='http://tpy.tw/?m=201410'>October 2014</a></li>
	<li><a href='http://tpy.tw/?m=201409'>September 2014</a></li>
	<li><a href='http://tpy.tw/?m=201408'>August 2014</a></li>
	<li><a href='http://tpy.tw/?m=201308'>August 2013</a></li>
		</ul>
</aside><aside id="categories-2" class="widget widget_categories"><h3 class="widget-title">Categories</h3>		<ul>
	<li class="cat-item cat-item-1"><a href="http://tpy.tw/?cat=1" >未分類</a>
</li>
		</ul>
</aside><aside id="meta-2" class="widget widget_meta"><h3 class="widget-title">Meta</h3>			<ul>
						<li><a href="http://tpy.tw/wp-login.php">Log in</a></li>
			<li><a href="http://tpy.tw/?feed=rss2">Entries <abbr title="Really Simple Syndication">RSS</abbr></a></li>
			<li><a href="http://tpy.tw/?feed=comments-rss2">Comments <abbr title="Really Simple Syndication">RSS</abbr></a></li>
<li><a href="https://wordpress.org/" title="Powered by WordPress, state-of-the-art semantic personal publishing platform.">WordPress.org</a></li>			</ul>
</aside>		</div><!-- .widget-area -->
	</div><!-- #secondary -->

			<div class="site-info">
								<a href="http://wordpress.org/" title="Semantic Personal Publishing Platform">Proudly powered by WordPress</a>
			</div><!-- .site-info -->
		</footer><!-- #colophon -->
	</div><!-- #page -->

	<script type='text/javascript' src='http://tpy.tw/wp-includes/js/masonry.min.js?ver=3.1.2'></script>
<script type='text/javascript' src='http://tpy.tw/wp-includes/js/jquery/jquery.masonry.min.js?ver=3.1.2'></script>
<script type='text/javascript' src='http://tpy.tw/wp-content/themes/twentythirteen/js/functions.js?ver=2014-06-08'></script>
</body>
</html>